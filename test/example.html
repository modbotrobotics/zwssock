<html>
<head>
    <meta charset="utf-8"/>
    <title></title>
    <script src="https://rawgit.com/somdoron/JSMQ/master/JSMQ.js"></script>

    <script>
        var dealer = new JSMQ.Dealer();
        dealer.connect("ws://localhost:15798");

        // Wait for dealer to connect to router before allowing messages to be sent
        dealer.sendReady = function() {
            document.getElementById("sendButton").disabled = "";
        };

        dealer.onMessage = function (message) {
            // Callback executed on response received from the server
            console.log("Received: \"" + message.popString() + "\"");
        };

        function send() {
            var message = new JSMQ.Message();
            message.addString(document.getElementById("messageTextBox").value);

            dealer.send(message);
        }

        function onInputKeyPress(e) {
            var unicode = e.keyCode ? e.keyCode : e.charCode;
            if (unicode == 13)
                send();
        }
    </script>
</head>
<body>
    <label>Message:</label><input id="messageTextBox" value="" onkeypress="onInputKeyPress(event)"/>
    <button id="sendButton" disabled="disabled" onclick="javascript:send();">
        Send
    </button>
</body>
</html>
